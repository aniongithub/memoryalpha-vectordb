#!/bin/bash

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}" )" && pwd)"
DB_DIR="$SCRIPT_DIR/../data/enmemoryalpha_db"
ARCHIVE="$SCRIPT_DIR/../data/enmemoryalpha_db.tar.gz"

if [ ! -d "$DB_DIR" ]; then
    echo "‚ùå ChromaDB directory not found: $DB_DIR"
    exit 1
fi

echo "üì¶ Compressing ChromaDB directory..."
tar czf "$ARCHIVE" -C "$(dirname "$DB_DIR")" "$(basename "$DB_DIR")"
if [ $? -ne 0 ]; then
    echo "‚ùå Compression failed."
    exit 1
fi

echo "‚úÖ Compressed ChromaDB to $ARCHIVE"
